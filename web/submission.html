<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Providence Test Singing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- milligram css -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.3.0/milligram.css">
    <!-- custom styles -->
    <link rel="stylesheet" href="/main.css">
  </head>
  <body>
    <main class="wrapper" id="main">
      <div class="container">
        <h1 id="submissionTitle">Submission Test</h1>

        <div id="submissionWrapper">

          <h2>Instructions</h2>

          <p>Use the form to submit your recording. You can upload an audio or
            video recording. Please leave this page open until your upload is
            complete.</p>

          <form id="submissionForm">

            <input type="hidden" name="singing">
            <input type="hidden" name="song">

            <!-- Media -->
            <!-- TODO: list of acceptable extensions? -->
            <div class="container">
              <div class="row">
                <div class="column">
                  <label>
                    Upload a video or audio file
                    <span class="required-star">*</span>
                  </label>
                  <div id="media_upload">
                    <input type="file"
                           id="uploadInput"
                           accept="audio/*,video/*"
                           required>
                    <label for="uploadInput" class="button">Browse</label>
                    <span id="uploadDetails"></span>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="column">
                  <div id="uploadPreview">
                  </div>
                </div>
              </div>
            </div>

            <!-- Singers -->
            <hr>
            <fieldset>
              <div class="container" id="singersContainer">
                <div class="row singer" id="singer1">
                  <div class="column">
                    <label>
                      Part
                      <span class="required-star">*</span>
                      <select name="part" required>
                        <option value=""></option>
                        <option value="bass">Bass</option>
                        <option value="alto">Alto</option>
                        <option value="tenor">Tenor</option>
                        <option value="treble">Treble</option>
                      </select>
                    </label>
                  </div>
                  <div class="column">
                    <label>
                      Name
                      <input type="text" name="name">
                    </label>
                  </div>
                  <div class="column">
                    <label>
                      Email
                      <input type="email" name="email">
                    </label>
                  </div>
                </div>
              </div>
              <button id="addSinger">Add a singer</button>
              <button id="removeSinger" disabled>Remove a singer</button>
            </fieldset>

            <!-- Location -->
            <hr>
            <fieldset id="location">
              <div class="container">
                <div class="row">
                  <div class="column">
                    <label>
                      City
                      <input type="text" name="city">
                    </label>
                  </div>
                  <div class="column">
                    <label>
                      State/Province
                      <input type="text" name="state">
                    </label>
                  </div>
                  <div class="column">
                    <label>
                      Country
                      <input type="text" name="country" autocomplete="address-level1">
                    </label>
                  </div>
                </div>
              </div>
            </fieldset>

            <button id="submit" class="button-primary">Submit</button>
          </form>
        </div>

        <div id="uploadProgress" style="display:none">
          <h2 id="progressTitle">Uploading your submission</h2>
          <p id="progressSubtitle">
            Please leave this window open until your upload is complete
          </p>
          <div id="progressBar">
            <div id="progress" style="width: 0"></div>
          </div>
          <p id="progressLog">Starting upload...</p>
        </div>

      </div>

    </main>

    <script>
      (function() {
        // parse the path
        var path = location.pathname.substr(1).split('/');
        if (path.length === 3) {
          document.getElementsByName('singing')[0].value = path[0];
          document.getElementsByName('song')[0].value = path[1];
          document.getElementById('submissionTitle').textContent =
            "Welcome! We're singing " + path[1];
        }
      })();
    </script>

    <script src="/main.js"></script>
  </body>
</html>
